.\start-local-db.bat
Starting Pokemon Album Builder with Local PostgreSQL Database
DATABASE_URL set to: postgresql://postgres:admin@localhost:5432/binderapp
Make sure your local PostgreSQL server is running!
Make sure you've created a database named "binderapp"!
Checking for required packages...
npm ERR! code EPERM
npm ERR! syscall rmdir
npm ERR! path C:\Users\progr\OneDrive\Desktop\BinderApp\PokemonAlbumBuilder\node_modules\dotenv\lib
npm ERR! errno -4048
npm ERR! Error: EPERM: operation not permitted, rmdir 'C:\Users\progr\OneDrive\Desktop\BinderApp\PokemonAlbumBuilder\node_modules\dotenv\lib'
npm ERR!  [Error: EPERM: operation not permitted, rmdir 'C:\Users\progr\OneDrive\Desktop\BinderApp\PokemonAlbumBuilder\node_modules\dotenv\lib'] {                                                                                                                                        npm ERR!   errno: -4048,
npm ERR!   code: 'EPERM',
npm ERR!   syscall: 'rmdir',
npm ERR!   path: 'C:\\Users\\progr\\OneDrive\\Desktop\\BinderApp\\PokemonAlbumBuilder\\node_modules\\dotenv\\lib'
npm ERR! }
npm ERR!
npm ERR! The operation was rejected by your operating system.
npm ERR! It's possible that the file was already in use (by a text editor or antivirus),
npm ERR! or that you lack permissions to access it.
npm ERR!
npm ERR! If you believe this might be a permissions issue, please double-check the
npm ERR! permissions of the file and its containing directories, or try running
npm ERR! the command again as root/Administrator.

npm ERR! A complete log of this run can be found in: C:\Users\progr\AppData\Local\npm-cache\_logs\2025-04-27T17_02_46_889Z-debug-0.log       
Starting application...

> rest-express@1.0.0 dev
> tsx server/index.ts

DATABASE_URL: postgresql://postgres:admin@localhost:5432/binderapp
Using local PostgreSQL connection
Failed to connect to local PostgreSQL: ReferenceError: require is not defined
    at <anonymous> (C:\Users\progr\OneDrive\Desktop\BinderApp\PokemonAlbumBuilder\server\db.ts:27:25)
    at ModuleJob.run (node:internal/modules/esm/module_job:222:25)
    at async ModuleLoader.import (node:internal/modules/esm/loader:323:24)
    at async loadESM (node:internal/process/esm_loader:28:7)
    at async handleMainPromise (node:internal/modules/run_main:113:12)
Failed to connect to database: ReferenceError: require is not defined
    at <anonymous> (C:\Users\progr\OneDrive\Desktop\BinderApp\PokemonAlbumBuilder\server\db.ts:27:25)
    at ModuleJob.run (node:internal/modules/esm/module_job:222:25)
    at async ModuleLoader.import (node:internal/modules/esm/loader:323:24)
    at async loadESM (node:internal/process/esm_loader:28:7)
    at async handleMainPromise (node:internal/modules/run_main:113:12)
Falling back to in-memory storage due to database connection error
Using in-memory session store
7:03:07 PM [express] serving on port 5000
7:03:26 PM [express] GET /api/user 401 in 3ms :: {"error":"Not authenticated"}
7:03:26 PM [express] GET /api/user 401 in 2ms :: {"error":"Not authenticated"}
7:03:26 PM [express] GET /api/albums/all 200 in 1ms :: []
7:03:34 PM [express] POST /api/login 401 in 2ms :: {"error":"Invalid username or password"}
7:03:45 PM [express] POST /api/register 500 in 48ms :: {"message":"Pool missing for some reason"}
Error: Pool missing for some reason
    at DatabaseStorage.createUser (C:\Users\progr\OneDrive\Desktop\BinderApp\PokemonAlbumBuilder\server\storage.ts:324:13)
    at <anonymous> (C:\Users\progr\OneDrive\Desktop\BinderApp\PokemonAlbumBuilder\server\auth.ts:94:34)
Terminare il processo batch (S/N)? s
